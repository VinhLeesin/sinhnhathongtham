<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday</title>
    <link href="/style.css" rel="stylesheet" type="text/css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>

</head>

<body>
    <div class='birthday'>
        <div class='birthday_inner'>
            <div class='birthday_inner__modal'>
                <div class='modal_image'>
                    <img src='/'>
                </div>
                <div class='modal_content'>
                    <h1>Title</h1>
                    <p>Content</p>
                    <button>Button</button>
                </div>
            </div>
            <div class='birthday_inner__stage stage1'>
                <div class='intro_cake'>
                    <img class='intro' src='gif1.gif'>
                </div>
                <button class='start'>üíñ Click here üíñ</button>
            </div>
            <div class='birthday_inner__stage stage2'>
                <h1>H√£y b·∫Øt ƒë·∫ßu b·∫±ng vi·ªác tr·ªôn b·ªôt</h1>
                <h2>Cho t·∫•t c·∫£ nguy√™n li·ªáu v√†o m·ªôt c√°i t√¥ l·ªõn r√πi tr·ªôn n√≥ l√™n cho t·ªõi khi h·ªón h·ª£p m·ªãn v√† m∆∞·ª£t nh√©.</h2>
                <div class='mix'>
                    <div class='mix_bowl'>
                        <img src='https://s3-us-west-2.amazonaws.com/s.cdpn.io/217233/bowl.png'>
                    </div>
                    <div class='mix_spoon'>
                        <img src='https://s3-us-west-2.amazonaws.com/s.cdpn.io/217233/spoon.png'>
                    </div>
                </div>
                <button class='mixer'>Tr·ªôn nhanh c√°i tay l√™n üòèüòèüòè</button>
            </div>
            <div class='birthday_inner__stage stage3'>
                <h1>N∆∞·ªõng b√°nh th√¥i n√†o</h1>
                <h2>Gi·ªù th√¨ cho b√°nh v√†o l√≤ ƒë·ªÉ n∆∞·ªõng th√¥i. Nh·ªõ c·∫©n th·∫≠n kh√¥ng th√¨ ch√°y b√°nh ƒë√≥ nha.</h2>
                <div class='oven'>
                    <img src='https://s3-us-west-2.amazonaws.com/s.cdpn.io/217233/oven.png'>
                </div>
                <div class='tin'>
                    <img src='https://s3-us-west-2.amazonaws.com/s.cdpn.io/217233/tin.png'>
                </div>
            </div>
            <div class='birthday_inner__stage stage4'>
                <h1>Trang tr√≠ b√°nh th√¥i n√†o</h1>
                <h2>H√£y ph·ªß l√™n chi·∫øc b√°nh m√†u s·∫Øc v√† h∆∞∆°ng v·ªã m√¨nh y√™u th√≠ch nh√© üíñüíñüíñ</h2>
                <div class='svg'>
                    <svg enable-background='new 0 0 213 46' height='46px' id='Layer_1' space='preserve' version='1.1'
                        viewBox='0 0 213 46' width='213px' x='0px' xmlns:xlink='http://www.w3.org/1999/xlink'
                        xmlns='http://www.w3.org/2000/svg' y='0px'>
                        <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-family="cursive"
                            font-size="20" fill="red">
                            üíñüíñüíñ Ch√∫c M·ª´ng Sinh Nh·∫≠t B√© Iu üíñüíñüíñ
                        </text>
                    </svg>
                </div>
                <div class='options'>
                    <div class='sponges inactive'>
                        <h3>Kem</h3>
                        <h5>
                            <span>0</span>
                            / 5
                        </h5>
                        <div class='item'>
                            <div class='item_inner vanilla'></div>
                            <h4>Vani</h4>
                        </div>
                        <div class='item'>
                            <div class='item_inner strawberry'></div>
                            <h4>Matcha</h4>
                        </div>
                        <div class='item'>
                            <div class='item_inner fruit'></div>
                            <h4>Socola</h4>
                        </div>
                    </div>
                    <div class='fillings'>
                        <h3>Trang tr√≠</h3>
                        <h5>
                            <span>0</span>
                            / 6
                        </h5>
                        <div class='item'>
                            <div class='item_inner jam'></div>
                            <h4>Tr√°i c√¢y</h4>
                        </div>
                        <div class='item'>
                            <div class='item_inner cream'></div>
                            <h4>K·∫πo</h4>
                        </div>
                        <div class='item'>
                            <div class='item_inner choc'></div>
                            <h4>B√°nh</h4>
                        </div>
                        <div class='item'>
                            <div class='item_inner lemon'></div>
                            <h4>Hoa</h4>
                        </div>
                    </div>
                </div>
                <div class='cakemake'>
                    <div class='base'></div>
                </div>
                <button class='add'>Add the candle</button>
                <div class="sa">
                    <img src="gif9.gif">
                    <img src="gif10.gif">
                </div>
            </div>
        </div>
    </div>

    <script>
        $(document).ready(function () {
            $('.start').click(function () {
                $('.stage1').fadeOut();
                fire_modal('gif4.gif', 'Ch√∫c m·ª´ng sinh nh·∫≠t em y√™u!', 'H√¥m nay, m√¨nh c√πng nhau l√†m b√°nh em nh√©. Hy v·ªçng n√≥ s·∫Ω ng·ªçt ng√†o nh∆∞ t√¨nh c·∫£m m√† ch√∫ng ta d√†nh cho nhau. Ch√∫c em c√≥ m·ªôt ng√†y sinh nh·∫≠t tr√†n ng·∫≠p h·∫°nh ph√∫c, ni·ªÅm vui v√† t√¨nh y√™u. M·ªçi ∆∞·ªõc m∆° c·ªßa em s·∫Ω s·ªõm tr·ªü th√†nh hi·ªán th·ª±c, v√† ch√∫ng m√¨nh s·∫Ω lu√¥n b√™n nhau tr√™n m·ªçi ch·∫∑ng ƒë∆∞·ªùng. Anh y√™u em r·∫•t nhi·ªÅu! üç∞üíï', 'üíñ C√πng l√†m b√°nh th√¥i üíñ');
            })

            progress = 1;

            $('.modal_content button').click(function () {
                progress++;
                close_modal(progress)
            })

            function close_modal(callback) {
                modal.css('transform', 'translateY(-50%) scale(0)')
                setTimeout(function () {
                    $('.stage' + callback).fadeIn();
                }, 600)
            }

            function fire_modal(imgurl, title, content, button) {

                modal = $('.birthday_inner__modal');
                modal.find('h1').html(title);
                modal.find('img').attr('src', imgurl);
                modal.find('p').html(content);
                modal.find('button').html(button);
                setTimeout(function () {
                    modal.css('transform', 'translateY(-50%) scale(1)')
                }, 1000)


            }


            mixing = false;
            mixtimes = 0;

            $('.mixer').click(function () {
                if (mixing == false) {
                    mixing = true
                    mixtimes++;
                    $('.mix_spoon img').addClass('move')
                    setTimeout(function () {
                        $('.mix_spoon img').removeClass('move')
                        mixing = false;
                    }, 1000)
                }
                if (mixtimes == 6) {
                    $('.stage2').fadeOut();
                    fire_modal('gif7.gif', 'Tr·ªôn b·ªôt th√†nh c√¥ng!', 'Gi·ªù th√¨ ƒë·ªï b·ªôt v√†o khu√¢n r√πi cho v√†o l√≤ n∆∞·ªõng th√¥i n√†o üòçüòçüòç', 'üíñ ƒêi n∆∞·ªõng b√°nh th√¥i üíñ');

                }

            })

            $('.tin').draggable({
                revert: true
            })
            $(".oven").droppable({
                drop: function (event, ui) {
                    $('.stage3').fadeOut();
                    fire_modal('gif6.gif', 'Tada n∆∞·ªõng xong b√°nh r√πi!', 'Gi·ªù th√¨ ƒëi trang tr√≠ chi·∫øc b√°nh c·ªßa m√¨nh ƒë·ªÉ cho n√≥ ƒë·∫πp h∆°n nh√© üòçüòçüòç', 'üíñ ƒêi trang tr√≠ b√°nh th√¥i üíñ');
                }
            })

            bases = 0;
            fillings = 0;

            $('.sponges .item_inner').click(function () {
                $('.sponges').addClass('inactive')
                $('.fillings').removeClass('inactive')
                t = $(this).attr('class').split(' ').pop();
                bases++
                if (bases < 6) {
                    add_sponge(t)
                }
            })

            $('.fillings .item_inner').click(function () {
                $('.fillings').addClass('inactive')
                $('.sponges').removeClass('inactive')
                f = $(this).attr('class').split(' ').pop();
                fillings++
                if (fillings < 7) {
                    add_filling(f)
                }
            })

            function add_sponge(t) {

                $('.cakemake').prepend('<div style="width:' + (200 - (bases * 20)) + 'px" class="sponge sponge-' + t + '"><div></div><div></div><div></div><div></div><div></div></div>')
                $('.sponges h5 span').html(bases)
            }

            $('.startagain').click(function () {
                $('.cakemake').html('<div class="base"></div>');
                bases = 0;
                fillings = 0;
                $('.sponges h5 span').html(bases)
                $('.fillings h5 span').html(fillings)
                $('.fillings').removeClass('inactive')
                $('.sponges').addClass('inactive')
            })
            function add_filling(f) {

                $('.cakemake').prepend('<div style="width:' + (200 - (bases * 20)) + 'px" class="filling filling-' + f + '"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div>')
                $('.fillings h5 span').html(fillings)
            }

            function fin() {
                $('h1,h2,.options,.startagain,.add').fadeOut();

                setTimeout(function () {
                    $('.cakemake').fadeIn()
                    $('.cakemake').animate({ 'margin-top': '0px' })
                }, 1000)
                add_candle()
                $('svg').addClass('text')
            }

            function add_candle() {
                var stages = $('.cakemake > div').length;
                var h = (stages / 2) * 41 + 22 + 'px';
                console.log(stages)
                $('.cakemake').prepend('<div class="candle" ><img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/217233/candle.png" /></div>')
                $('svg').show()
                setTimeout(function () {
                    $('.sa').fadeIn()
                }, 2200)

            }




            $('.add').click(function () {
                fin();
            })

            $('.sa').click(function () {
                window.location.reload();
            })

        });
    </script>
</body>

</html>